{
  "contractName": "DepositContract",
  "sourcePath": "contracts/GatedDepositContract.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "gater",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "pubkey",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "withdrawal_credentials",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "amount",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "index",
          "type": "bytes"
        }
      ],
      "name": "DepositEvent",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "pubkey",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "withdrawal_credentials",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        },
        {
          "internalType": "bytes32",
          "name": "deposit_data_root",
          "type": "bytes32"
        }
      ],
      "name": "deposit",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "get_deposit_count",
      "outputs": [
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "get_deposit_root",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "interfaceId",
          "type": "bytes4"
        }
      ],
      "name": "supportsInterface",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561000f575f5ffd5b5060405161157d38038061157d83398101604081905261002e91610126565b5f5b61003c60016020610167565b8110156101005760026021826020811061005857610058610180565b01546021836020811061006d5761006d610180565b015460408051602081019390935282015260600160408051601f198184030181529082905261009b91610194565b602060405180830381855afa1580156100b6573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906100d991906101aa565b60216100e68360016101c1565b602081106100f6576100f6610180565b0155600101610030565b50604180546001600160a01b0319166001600160a01b03929092169190911790556101d4565b5f60208284031215610136575f5ffd5b81516001600160a01b038116811461014c575f5ffd5b9392505050565b634e487b7160e01b5f52601160045260245ffd5b8181038181111561017a5761017a610153565b92915050565b634e487b7160e01b5f52603260045260245ffd5b5f82518060208501845e5f920191825250919050565b5f602082840312156101ba575f5ffd5b5051919050565b8082018082111561017a5761017a610153565b61139c806101e15f395ff3fe60806040526004361061003e575f3560e01c806301ffc9a7146100425780632289511814610076578063621fd1301461008b578063c5f2892f146100ac575b5f5ffd5b34801561004d575f5ffd5b5061006161005c366004610e46565b6100ce565b60405190151581526020015b60405180910390f35b610089610084366004610ed1565b610166565b005b348015610096575f5ffd5b5061009f610ac9565b60405161006d9190610fa6565b3480156100b7575f5ffd5b506100c0610adb565b60405190815260200161006d565b5f7fffffffff0000000000000000000000000000000000000000000000000000000082167f01ffc9a700000000000000000000000000000000000000000000000000000000148061016057507fffffffff0000000000000000000000000000000000000000000000000000000082167f8564090700000000000000000000000000000000000000000000000000000000145b92915050565b603086146101e15760405162461bcd60e51b815260206004820152602660248201527f4465706f736974436f6e74726163743a20696e76616c6964207075626b65792060448201527f6c656e677468000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b602084146102575760405162461bcd60e51b815260206004820152603660248201527f4465706f736974436f6e74726163743a20696e76616c6964207769746864726160448201527f77616c5f63726564656e7469616c73206c656e6774680000000000000000000060648201526084016101d8565b606082146102cd5760405162461bcd60e51b815260206004820152602960248201527f4465706f736974436f6e74726163743a20696e76616c6964207369676e61747560448201527f7265206c656e677468000000000000000000000000000000000000000000000060648201526084016101d8565b670de0b6b3a764000034101561034b5760405162461bcd60e51b815260206004820152602660248201527f4465706f736974436f6e74726163743a206465706f7369742076616c7565207460448201527f6f6f206c6f77000000000000000000000000000000000000000000000000000060648201526084016101d8565b610359633b9aca0034610fcc565b156103cc5760405162461bcd60e51b815260206004820152603360248201527f4465706f736974436f6e74726163743a206465706f7369742076616c7565206e60448201527f6f74206d756c7469706c65206f6620677765690000000000000000000000000060648201526084016101d8565b5f6103db633b9aca0034610ff3565b905067ffffffffffffffff81111561045b5760405162461bcd60e51b815260206004820152602760248201527f4465706f736974436f6e74726163743a206465706f7369742076616c7565207460448201527f6f6f20686967680000000000000000000000000000000000000000000000000060648201526084016101d8565b60415473ffffffffffffffffffffffffffffffffffffffff161561051f576041546040517fc174892800000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff9091169063c1748928906104dd9033908c908c908c908c908c908c90349060040161102f565b6020604051808303815f875af11580156104f9573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061051d919061109c565b505b5f61052982610c9c565b90507f649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c589898989858a8a61055e602054610c9c565b6040516105729897969594939291906110bb565b60405180910390a15f60028a8a5f60801b6040516020016105959392919061112d565b60408051601f19818403018152908290526105af9161117a565b602060405180830381855afa1580156105ca573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906105ed9190611185565b90505f6002806106006040848a8c61119c565b6040516020016106119291906111c3565b60408051601f198184030181529082905261062b9161117a565b602060405180830381855afa158015610646573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906106699190611185565b6002610678896040818d61119c565b60405161068b9291905f906020016111d2565b60408051601f19818403018152908290526106a59161117a565b602060405180830381855afa1580156106c0573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906106e39190611185565b60408051602081019390935282015260600160408051601f198184030181529082905261070f9161117a565b602060405180830381855afa15801561072a573d5f5f3e3d5ffd5b5050506040513d601f19601f8201168201806040525081019061074d9190611185565b90505f600280848c8c604051602001610768939291906111e4565b60408051601f19818403018152908290526107829161117a565b602060405180830381855afa15801561079d573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906107c09190611185565b6040516002906107d89088905f9088906020016111fd565b60408051601f19818403018152908290526107f29161117a565b602060405180830381855afa15801561080d573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906108309190611185565b60408051602081019390935282015260600160408051601f198184030181529082905261085c9161117a565b602060405180830381855afa158015610877573d5f5f3e3d5ffd5b5050506040513d601f19601f8201168201806040525081019061089a9190611185565b90508581146109375760405162461bcd60e51b815260206004820152605460248201527f4465706f736974436f6e74726163743a207265636f6e7374727563746564204460448201527f65706f7369744461746120646f6573206e6f74206d6174636820737570706c6960648201527f6564206465706f7369745f646174615f726f6f74000000000000000000000000608482015260a4016101d8565b60016109456020600261130a565b61094f9190611315565b602054106109c55760405162461bcd60e51b815260206004820152602160248201527f4465706f736974436f6e74726163743a206d65726b6c6520747265652066756c60448201527f6c0000000000000000000000000000000000000000000000000000000000000060648201526084016101d8565b600160205f8282546109d79190611328565b90915550506020545f5b6020811015610ab05781600116600103610a1757825f8260208110610a0857610a0861133b565b015550610ac095505050505050565b60025f8260208110610a2b57610a2b61133b565b0154604080516020810192909252810185905260600160408051601f1981840301815290829052610a5b9161117a565b602060405180830381855afa158015610a76573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610a999190611185565b9250610aa6600283610ff3565b91506001016109e1565b50610ab961134f565b5050505050505b50505050505050565b6060610ad6602054610c9c565b905090565b6020545f908190815b6020811015610c1b5781600116600103610b815760025f8260208110610b0c57610b0c61133b565b0154604080516020810192909252810185905260600160408051601f1981840301815290829052610b3c9161117a565b602060405180830381855afa158015610b57573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610b7a9190611185565b9250610c06565b60028360218360208110610b9757610b9761133b565b015460408051602081019390935282015260600160408051601f1981840301815290829052610bc59161117a565b602060405180830381855afa158015610be0573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610c039190611185565b92505b610c11600283610ff3565b9150600101610ae4565b50600282610c2a602054610c9c565b604051610c3d9291905f90602001611363565b60408051601f1981840301815290829052610c579161117a565b602060405180830381855afa158015610c72573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610c959190611185565b9250505090565b60408051600880825281830190925260609160208201818036833701905050905060c082901b8060071a60f81b825f81518110610cdb57610cdb61133b565b60200101906001600160f81b03191690815f1a9053508060061a60f81b82600181518110610d0b57610d0b61133b565b60200101906001600160f81b03191690815f1a9053508060051a60f81b82600281518110610d3b57610d3b61133b565b60200101906001600160f81b03191690815f1a9053508060041a60f81b82600381518110610d6b57610d6b61133b565b60200101906001600160f81b03191690815f1a9053508060031a60f81b82600481518110610d9b57610d9b61133b565b60200101906001600160f81b03191690815f1a9053508060021a60f81b82600581518110610dcb57610dcb61133b565b60200101906001600160f81b03191690815f1a9053508060011a60f81b82600681518110610dfb57610dfb61133b565b60200101906001600160f81b03191690815f1a905350805f1a60f81b82600781518110610e2a57610e2a61133b565b60200101906001600160f81b03191690815f1a90535050919050565b5f60208284031215610e56575f5ffd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610e85575f5ffd5b9392505050565b5f5f83601f840112610e9c575f5ffd5b50813567ffffffffffffffff811115610eb3575f5ffd5b602083019150836020828501011115610eca575f5ffd5b9250929050565b5f5f5f5f5f5f5f6080888a031215610ee7575f5ffd5b873567ffffffffffffffff811115610efd575f5ffd5b610f098a828b01610e8c565b909850965050602088013567ffffffffffffffff811115610f28575f5ffd5b610f348a828b01610e8c565b909650945050604088013567ffffffffffffffff811115610f53575f5ffd5b610f5f8a828b01610e8c565b989b979a50959894979596606090950135949350505050565b5f81518084528060208401602086015e5f602082860101526020601f19601f83011685010191505092915050565b602081525f610e856020830184610f78565b634e487b7160e01b5f52601260045260245ffd5b5f82610fda57610fda610fb8565b500690565b634e487b7160e01b5f52601160045260245ffd5b5f8261100157611001610fb8565b500490565b81835281816020850137505f602082840101525f6020601f19601f840116840101905092915050565b73ffffffffffffffffffffffffffffffffffffffff8916815260a060208201525f61105e60a08301898b611006565b828103604084015261107181888a611006565b90508281036060840152611086818688611006565b9150508260808301529998505050505050505050565b5f602082840312156110ac575f5ffd5b81518015158114610e85575f5ffd5b60a081525f6110ce60a083018a8c611006565b82810360208401526110e181898b611006565b905082810360408401526110f58188610f78565b9050828103606084015261110a818688611006565b9050828103608084015261111e8185610f78565b9b9a5050505050505050505050565b828482377fffffffffffffffffffffffffffffffff00000000000000000000000000000000919091169101908152601001919050565b5f81518060208401855e5f93019283525090919050565b5f610e858284611163565b5f60208284031215611195575f5ffd5b5051919050565b5f5f858511156111aa575f5ffd5b838611156111b6575f5ffd5b5050820193919092039150565b818382375f9101908152919050565b82848237909101908152602001919050565b838152818360208301375f910160200190815292915050565b5f6112088286611163565b67ffffffffffffffff1994909416845250506018820152603801919050565b6001815b60018411156112625780850481111561124657611246610fdf565b600184161561125457908102905b60019390931c92800261122b565b935093915050565b5f8261127857506001610160565b8161128457505f610160565b816001811461129a57600281146112a4576112c0565b6001915050610160565b60ff8411156112b5576112b5610fdf565b50506001821b610160565b5060208310610133831016604e8410600b84101617156112e3575081810a610160565b6112ef5f198484611227565b805f190482111561130257611302610fdf565b029392505050565b5f610e85838361126a565b8181038181111561016057610160610fdf565b8082018082111561016057610160610fdf565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52600160045260245ffd5b8381525f6113746020830185611163565b67ffffffffffffffff1993909316835250506018019291505056fea164736f6c634300081e000a",
  "deployedBytecode": "0x60806040526004361061003e575f3560e01c806301ffc9a7146100425780632289511814610076578063621fd1301461008b578063c5f2892f146100ac575b5f5ffd5b34801561004d575f5ffd5b5061006161005c366004610e46565b6100ce565b60405190151581526020015b60405180910390f35b610089610084366004610ed1565b610166565b005b348015610096575f5ffd5b5061009f610ac9565b60405161006d9190610fa6565b3480156100b7575f5ffd5b506100c0610adb565b60405190815260200161006d565b5f7fffffffff0000000000000000000000000000000000000000000000000000000082167f01ffc9a700000000000000000000000000000000000000000000000000000000148061016057507fffffffff0000000000000000000000000000000000000000000000000000000082167f8564090700000000000000000000000000000000000000000000000000000000145b92915050565b603086146101e15760405162461bcd60e51b815260206004820152602660248201527f4465706f736974436f6e74726163743a20696e76616c6964207075626b65792060448201527f6c656e677468000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b602084146102575760405162461bcd60e51b815260206004820152603660248201527f4465706f736974436f6e74726163743a20696e76616c6964207769746864726160448201527f77616c5f63726564656e7469616c73206c656e6774680000000000000000000060648201526084016101d8565b606082146102cd5760405162461bcd60e51b815260206004820152602960248201527f4465706f736974436f6e74726163743a20696e76616c6964207369676e61747560448201527f7265206c656e677468000000000000000000000000000000000000000000000060648201526084016101d8565b670de0b6b3a764000034101561034b5760405162461bcd60e51b815260206004820152602660248201527f4465706f736974436f6e74726163743a206465706f7369742076616c7565207460448201527f6f6f206c6f77000000000000000000000000000000000000000000000000000060648201526084016101d8565b610359633b9aca0034610fcc565b156103cc5760405162461bcd60e51b815260206004820152603360248201527f4465706f736974436f6e74726163743a206465706f7369742076616c7565206e60448201527f6f74206d756c7469706c65206f6620677765690000000000000000000000000060648201526084016101d8565b5f6103db633b9aca0034610ff3565b905067ffffffffffffffff81111561045b5760405162461bcd60e51b815260206004820152602760248201527f4465706f736974436f6e74726163743a206465706f7369742076616c7565207460448201527f6f6f20686967680000000000000000000000000000000000000000000000000060648201526084016101d8565b60415473ffffffffffffffffffffffffffffffffffffffff161561051f576041546040517fc174892800000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff9091169063c1748928906104dd9033908c908c908c908c908c908c90349060040161102f565b6020604051808303815f875af11580156104f9573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061051d919061109c565b505b5f61052982610c9c565b90507f649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c589898989858a8a61055e602054610c9c565b6040516105729897969594939291906110bb565b60405180910390a15f60028a8a5f60801b6040516020016105959392919061112d565b60408051601f19818403018152908290526105af9161117a565b602060405180830381855afa1580156105ca573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906105ed9190611185565b90505f6002806106006040848a8c61119c565b6040516020016106119291906111c3565b60408051601f198184030181529082905261062b9161117a565b602060405180830381855afa158015610646573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906106699190611185565b6002610678896040818d61119c565b60405161068b9291905f906020016111d2565b60408051601f19818403018152908290526106a59161117a565b602060405180830381855afa1580156106c0573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906106e39190611185565b60408051602081019390935282015260600160408051601f198184030181529082905261070f9161117a565b602060405180830381855afa15801561072a573d5f5f3e3d5ffd5b5050506040513d601f19601f8201168201806040525081019061074d9190611185565b90505f600280848c8c604051602001610768939291906111e4565b60408051601f19818403018152908290526107829161117a565b602060405180830381855afa15801561079d573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906107c09190611185565b6040516002906107d89088905f9088906020016111fd565b60408051601f19818403018152908290526107f29161117a565b602060405180830381855afa15801561080d573d5f5f3e3d5ffd5b5050506040513d601f19601f820116820180604052508101906108309190611185565b60408051602081019390935282015260600160408051601f198184030181529082905261085c9161117a565b602060405180830381855afa158015610877573d5f5f3e3d5ffd5b5050506040513d601f19601f8201168201806040525081019061089a9190611185565b90508581146109375760405162461bcd60e51b815260206004820152605460248201527f4465706f736974436f6e74726163743a207265636f6e7374727563746564204460448201527f65706f7369744461746120646f6573206e6f74206d6174636820737570706c6960648201527f6564206465706f7369745f646174615f726f6f74000000000000000000000000608482015260a4016101d8565b60016109456020600261130a565b61094f9190611315565b602054106109c55760405162461bcd60e51b815260206004820152602160248201527f4465706f736974436f6e74726163743a206d65726b6c6520747265652066756c60448201527f6c0000000000000000000000000000000000000000000000000000000000000060648201526084016101d8565b600160205f8282546109d79190611328565b90915550506020545f5b6020811015610ab05781600116600103610a1757825f8260208110610a0857610a0861133b565b015550610ac095505050505050565b60025f8260208110610a2b57610a2b61133b565b0154604080516020810192909252810185905260600160408051601f1981840301815290829052610a5b9161117a565b602060405180830381855afa158015610a76573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610a999190611185565b9250610aa6600283610ff3565b91506001016109e1565b50610ab961134f565b5050505050505b50505050505050565b6060610ad6602054610c9c565b905090565b6020545f908190815b6020811015610c1b5781600116600103610b815760025f8260208110610b0c57610b0c61133b565b0154604080516020810192909252810185905260600160408051601f1981840301815290829052610b3c9161117a565b602060405180830381855afa158015610b57573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610b7a9190611185565b9250610c06565b60028360218360208110610b9757610b9761133b565b015460408051602081019390935282015260600160408051601f1981840301815290829052610bc59161117a565b602060405180830381855afa158015610be0573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610c039190611185565b92505b610c11600283610ff3565b9150600101610ae4565b50600282610c2a602054610c9c565b604051610c3d9291905f90602001611363565b60408051601f1981840301815290829052610c579161117a565b602060405180830381855afa158015610c72573d5f5f3e3d5ffd5b5050506040513d601f19601f82011682018060405250810190610c959190611185565b9250505090565b60408051600880825281830190925260609160208201818036833701905050905060c082901b8060071a60f81b825f81518110610cdb57610cdb61133b565b60200101906001600160f81b03191690815f1a9053508060061a60f81b82600181518110610d0b57610d0b61133b565b60200101906001600160f81b03191690815f1a9053508060051a60f81b82600281518110610d3b57610d3b61133b565b60200101906001600160f81b03191690815f1a9053508060041a60f81b82600381518110610d6b57610d6b61133b565b60200101906001600160f81b03191690815f1a9053508060031a60f81b82600481518110610d9b57610d9b61133b565b60200101906001600160f81b03191690815f1a9053508060021a60f81b82600581518110610dcb57610dcb61133b565b60200101906001600160f81b03191690815f1a9053508060011a60f81b82600681518110610dfb57610dfb61133b565b60200101906001600160f81b03191690815f1a905350805f1a60f81b82600781518110610e2a57610e2a61133b565b60200101906001600160f81b03191690815f1a90535050919050565b5f60208284031215610e56575f5ffd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610e85575f5ffd5b9392505050565b5f5f83601f840112610e9c575f5ffd5b50813567ffffffffffffffff811115610eb3575f5ffd5b602083019150836020828501011115610eca575f5ffd5b9250929050565b5f5f5f5f5f5f5f6080888a031215610ee7575f5ffd5b873567ffffffffffffffff811115610efd575f5ffd5b610f098a828b01610e8c565b909850965050602088013567ffffffffffffffff811115610f28575f5ffd5b610f348a828b01610e8c565b909650945050604088013567ffffffffffffffff811115610f53575f5ffd5b610f5f8a828b01610e8c565b989b979a50959894979596606090950135949350505050565b5f81518084528060208401602086015e5f602082860101526020601f19601f83011685010191505092915050565b602081525f610e856020830184610f78565b634e487b7160e01b5f52601260045260245ffd5b5f82610fda57610fda610fb8565b500690565b634e487b7160e01b5f52601160045260245ffd5b5f8261100157611001610fb8565b500490565b81835281816020850137505f602082840101525f6020601f19601f840116840101905092915050565b73ffffffffffffffffffffffffffffffffffffffff8916815260a060208201525f61105e60a08301898b611006565b828103604084015261107181888a611006565b90508281036060840152611086818688611006565b9150508260808301529998505050505050505050565b5f602082840312156110ac575f5ffd5b81518015158114610e85575f5ffd5b60a081525f6110ce60a083018a8c611006565b82810360208401526110e181898b611006565b905082810360408401526110f58188610f78565b9050828103606084015261110a818688611006565b9050828103608084015261111e8185610f78565b9b9a5050505050505050505050565b828482377fffffffffffffffffffffffffffffffff00000000000000000000000000000000919091169101908152601001919050565b5f81518060208401855e5f93019283525090919050565b5f610e858284611163565b5f60208284031215611195575f5ffd5b5051919050565b5f5f858511156111aa575f5ffd5b838611156111b6575f5ffd5b5050820193919092039150565b818382375f9101908152919050565b82848237909101908152602001919050565b838152818360208301375f910160200190815292915050565b5f6112088286611163565b67ffffffffffffffff1994909416845250506018820152603801919050565b6001815b60018411156112625780850481111561124657611246610fdf565b600184161561125457908102905b60019390931c92800261122b565b935093915050565b5f8261127857506001610160565b8161128457505f610160565b816001811461129a57600281146112a4576112c0565b6001915050610160565b60ff8411156112b5576112b5610fdf565b50506001821b610160565b5060208310610133831016604e8410600b84101617156112e3575081810a610160565b6112ef5f198484611227565b805f190482111561130257611302610fdf565b029392505050565b5f610e85838361126a565b8181038181111561016057610160610fdf565b8082018082111561016057610160610fdf565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52600160045260245ffd5b8381525f6113746020830185611163565b67ffffffffffffffff1993909316835250506018019291505056fea164736f6c634300081e000a",
  "compiler": {
    "version": "0.8.30",
    "settings": {
      "evmVersion": "prague",
      "optimizer": {
        "enabled": true,
        "runs": 2000
      },
      "metadata": {
        "bytecodeHash": "none",
        "useLiteralContent": true
      },
      "outputSelection": {
        "*": {
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ],
          "": [
            "ast"
          ]
        }
      }
    }
  },
  "networks": {},
  "metadata": "{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"gater\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"pubkey\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"withdrawal_credentials\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"amount\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"index\",\"type\":\"bytes\"}],\"name\":\"DepositEvent\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"pubkey\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"withdrawal_credentials\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"deposit_data_root\",\"type\":\"bytes32\"}],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"get_deposit_count\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"get_deposit_root\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"deposit(bytes,bytes,bytes,bytes32)\":{\"params\":{\"deposit_data_root\":\"The SHA-256 hash of the SSZ-encoded DepositData object. Used as a protection against malformed input.\",\"pubkey\":\"A BLS12-381 public key.\",\"signature\":\"A BLS12-381 signature.\",\"withdrawal_credentials\":\"Commitment to a public key for withdrawals.\"}},\"get_deposit_count()\":{\"returns\":{\"_0\":\"The deposit count encoded as a little endian 64-bit number.\"}},\"get_deposit_root()\":{\"returns\":{\"_0\":\"The deposit root hash.\"}},\"supportsInterface(bytes4)\":{\"details\":\"Interface identification is specified in ERC-165. This function  uses less than 30,000 gas.\",\"params\":{\"interfaceId\":\"The interface identifier, as specified in ERC-165\"},\"returns\":{\"_0\":\"`true` if the contract implements `interfaceId` and  `interfaceId` is not 0xffffffff, `false` otherwise\"}}},\"version\":1},\"userdoc\":{\"events\":{\"DepositEvent(bytes,bytes,bytes,bytes,bytes)\":{\"notice\":\"A processed deposit event.\"}},\"kind\":\"user\",\"methods\":{\"deposit(bytes,bytes,bytes,bytes32)\":{\"notice\":\"Submit a Phase 0 DepositData object.\"},\"get_deposit_count()\":{\"notice\":\"Query the current deposit count.\"},\"get_deposit_root()\":{\"notice\":\"Query the current deposit root hash.\"},\"supportsInterface(bytes4)\":{\"notice\":\"Query if a contract implements an interface\"}},\"notice\":\"This is the Ethereum 2.0 deposit contract interface. For more information see the Phase 0 specification under https://github.com/ethereum/eth2.0-specs\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/GatedDepositContract.sol\":\"DepositContract\"},\"evmVersion\":\"prague\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":2000},\"remappings\":[]},\"sources\":{\"contracts/GatedDepositContract.sol\":{\"content\":\"// SPDX-License-Identifier: CC0-1.0\\n\\n// \\u250f\\u2501\\u2501\\u2501\\u2513\\u2501\\u250f\\u2513\\u2501\\u250f\\u2513\\u2501\\u2501\\u250f\\u2501\\u2501\\u2501\\u2513\\u2501\\u2501\\u250f\\u2501\\u2501\\u2501\\u2513\\u2501\\u2501\\u2501\\u2501\\u250f\\u2501\\u2501\\u2501\\u2513\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u2513\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u2501\\u2501\\u2501\\u2513\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u2513\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u2513\\u2501\\n// \\u2503\\u250f\\u2501\\u2501\\u251b\\u250f\\u251b\\u2517\\u2513\\u2503\\u2503\\u2501\\u2501\\u2503\\u250f\\u2501\\u2513\\u2503\\u2501\\u2501\\u2503\\u250f\\u2501\\u2513\\u2503\\u2501\\u2501\\u2501\\u2501\\u2517\\u2513\\u250f\\u2513\\u2503\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u251b\\u2517\\u2513\\u2501\\u2501\\u2501\\u2501\\u2503\\u250f\\u2501\\u2513\\u2503\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u251b\\u2517\\u2513\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u250f\\u251b\\u2517\\u2513\\n// \\u2503\\u2517\\u2501\\u2501\\u2513\\u2517\\u2513\\u250f\\u251b\\u2503\\u2517\\u2501\\u2513\\u2517\\u251b\\u250f\\u251b\\u2503\\u2501\\u2501\\u2503\\u2503\\u2501\\u2503\\u2503\\u2501\\u2501\\u2501\\u2501\\u2501\\u2503\\u2503\\u2503\\u2503\\u250f\\u2501\\u2501\\u2513\\u250f\\u2501\\u2501\\u2513\\u250f\\u2501\\u2501\\u2513\\u250f\\u2501\\u2501\\u2513\\u250f\\u2513\\u2517\\u2513\\u250f\\u251b\\u2501\\u2501\\u2501\\u2501\\u2503\\u2503\\u2501\\u2517\\u251b\\u250f\\u2501\\u2501\\u2513\\u250f\\u2501\\u2513\\u2501\\u2517\\u2513\\u250f\\u251b\\u250f\\u2501\\u2513\\u250f\\u2501\\u2501\\u2513\\u2501\\u250f\\u2501\\u2501\\u2513\\u2517\\u2513\\u250f\\u251b\\n// \\u2503\\u250f\\u2501\\u2501\\u251b\\u2501\\u2503\\u2503\\u2501\\u2503\\u250f\\u2513\\u2503\\u250f\\u2501\\u251b\\u250f\\u251b\\u2501\\u2501\\u2503\\u2503\\u2501\\u2503\\u2503\\u2501\\u2501\\u2501\\u2501\\u2501\\u2503\\u2503\\u2503\\u2503\\u2503\\u250f\\u2513\\u2503\\u2503\\u250f\\u2513\\u2503\\u2503\\u250f\\u2513\\u2503\\u2503\\u2501\\u2501\\u252b\\u2523\\u252b\\u2501\\u2503\\u2503\\u2501\\u2501\\u2501\\u2501\\u2501\\u2503\\u2503\\u2501\\u250f\\u2513\\u2503\\u250f\\u2513\\u2503\\u2503\\u250f\\u2513\\u2513\\u2501\\u2503\\u2503\\u2501\\u2503\\u250f\\u251b\\u2517\\u2501\\u2513\\u2503\\u2501\\u2503\\u250f\\u2501\\u251b\\u2501\\u2503\\u2503\\u2501\\n// \\u2503\\u2517\\u2501\\u2501\\u2513\\u2501\\u2503\\u2517\\u2513\\u2503\\u2503\\u2503\\u2503\\u2503\\u2503\\u2517\\u2501\\u2513\\u250f\\u2513\\u2503\\u2517\\u2501\\u251b\\u2503\\u2501\\u2501\\u2501\\u2501\\u250f\\u251b\\u2517\\u251b\\u2503\\u2503\\u2503\\u2501\\u252b\\u2503\\u2517\\u251b\\u2503\\u2503\\u2517\\u251b\\u2503\\u2523\\u2501\\u2501\\u2503\\u2503\\u2503\\u2501\\u2503\\u2517\\u2513\\u2501\\u2501\\u2501\\u2501\\u2503\\u2517\\u2501\\u251b\\u2503\\u2503\\u2517\\u251b\\u2503\\u2503\\u2503\\u2503\\u2503\\u2501\\u2503\\u2517\\u2513\\u2503\\u2503\\u2501\\u2503\\u2517\\u251b\\u2517\\u2513\\u2503\\u2517\\u2501\\u2513\\u2501\\u2503\\u2517\\u2513\\n// \\u2517\\u2501\\u2501\\u2501\\u251b\\u2501\\u2517\\u2501\\u251b\\u2517\\u251b\\u2517\\u251b\\u2517\\u2501\\u2501\\u2501\\u251b\\u2517\\u251b\\u2517\\u2501\\u2501\\u2501\\u251b\\u2501\\u2501\\u2501\\u2501\\u2517\\u2501\\u2501\\u2501\\u251b\\u2517\\u2501\\u2501\\u251b\\u2503\\u250f\\u2501\\u251b\\u2517\\u2501\\u2501\\u251b\\u2517\\u2501\\u2501\\u251b\\u2517\\u251b\\u2501\\u2517\\u2501\\u251b\\u2501\\u2501\\u2501\\u2501\\u2517\\u2501\\u2501\\u2501\\u251b\\u2517\\u2501\\u2501\\u251b\\u2517\\u251b\\u2517\\u251b\\u2501\\u2517\\u2501\\u251b\\u2517\\u251b\\u2501\\u2517\\u2501\\u2501\\u2501\\u251b\\u2517\\u2501\\u2501\\u251b\\u2501\\u2517\\u2501\\u251b\\n// \\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2503\\u2503\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\n// \\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2517\\u251b\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\u2501\\n\\npragma solidity ^0.8.21;\\n\\nimport \\\"./IDepositGater.sol\\\";\\n\\n// This interface is designed to be compatible with the Vyper version.\\n/// @notice This is the Ethereum 2.0 deposit contract interface.\\n/// For more information see the Phase 0 specification under https://github.com/ethereum/eth2.0-specs\\ninterface IDepositContract {\\n    /// @notice A processed deposit event.\\n    event DepositEvent(\\n        bytes pubkey,\\n        bytes withdrawal_credentials,\\n        bytes amount,\\n        bytes signature,\\n        bytes index\\n    );\\n\\n    /// @notice Submit a Phase 0 DepositData object.\\n    /// @param pubkey A BLS12-381 public key.\\n    /// @param withdrawal_credentials Commitment to a public key for withdrawals.\\n    /// @param signature A BLS12-381 signature.\\n    /// @param deposit_data_root The SHA-256 hash of the SSZ-encoded DepositData object.\\n    /// Used as a protection against malformed input.\\n    function deposit(\\n        bytes calldata pubkey,\\n        bytes calldata withdrawal_credentials,\\n        bytes calldata signature,\\n        bytes32 deposit_data_root\\n    ) external payable;\\n\\n    /// @notice Query the current deposit root hash.\\n    /// @return The deposit root hash.\\n    function get_deposit_root() external view returns (bytes32);\\n\\n    /// @notice Query the current deposit count.\\n    /// @return The deposit count encoded as a little endian 64-bit number.\\n    function get_deposit_count() external view returns (bytes memory);\\n}\\n\\n// Based on official specification in https://eips.ethereum.org/EIPS/eip-165\\ninterface ERC165 {\\n    /// @notice Query if a contract implements an interface\\n    /// @param interfaceId The interface identifier, as specified in ERC-165\\n    /// @dev Interface identification is specified in ERC-165. This function\\n    ///  uses less than 30,000 gas.\\n    /// @return `true` if the contract implements `interfaceId` and\\n    ///  `interfaceId` is not 0xffffffff, `false` otherwise\\n    function supportsInterface(bytes4 interfaceId) external pure returns (bool);\\n}\\n\\n// This is a rewrite of the Vyper Eth2.0 deposit contract in Solidity.\\n// It tries to stay as close as possible to the original source code.\\n/// @notice This is the Ethereum 2.0 deposit contract interface.\\n/// For more information see the Phase 0 specification under https://github.com/ethereum/eth2.0-specs\\ncontract DepositContract is IDepositContract, ERC165 {\\n    uint constant DEPOSIT_CONTRACT_TREE_DEPTH = 32;\\n    // NOTE: this also ensures `deposit_count` will fit into 64-bits\\n    uint constant MAX_DEPOSIT_COUNT = 2**DEPOSIT_CONTRACT_TREE_DEPTH - 1;\\n\\n    bytes32[DEPOSIT_CONTRACT_TREE_DEPTH] branch;\\n    uint256 deposit_count;\\n\\n    bytes32[DEPOSIT_CONTRACT_TREE_DEPTH] zero_hashes;\\n\\n    address depositGater;\\n\\n    constructor(address gater) public {\\n        // Compute hashes in empty sparse Merkle tree\\n        for (uint height = 0; height < DEPOSIT_CONTRACT_TREE_DEPTH - 1; height++)\\n            zero_hashes[height + 1] = sha256(abi.encodePacked(zero_hashes[height], zero_hashes[height]));\\n\\n        depositGater = gater;\\n    }\\n\\n    function get_deposit_root() override external view returns (bytes32) {\\n        bytes32 node;\\n        uint size = deposit_count;\\n        for (uint height = 0; height < DEPOSIT_CONTRACT_TREE_DEPTH; height++) {\\n            if ((size & 1) == 1)\\n                node = sha256(abi.encodePacked(branch[height], node));\\n            else\\n                node = sha256(abi.encodePacked(node, zero_hashes[height]));\\n            size /= 2;\\n        }\\n        return sha256(abi.encodePacked(\\n            node,\\n            to_little_endian_64(uint64(deposit_count)),\\n            bytes24(0)\\n        ));\\n    }\\n\\n    function get_deposit_count() override external view returns (bytes memory) {\\n        return to_little_endian_64(uint64(deposit_count));\\n    }\\n\\n    function deposit(\\n        bytes calldata pubkey,\\n        bytes calldata withdrawal_credentials,\\n        bytes calldata signature,\\n        bytes32 deposit_data_root\\n    ) override external payable {\\n        // Extended ABI length checks since dynamic types are used.\\n        require(pubkey.length == 48, \\\"DepositContract: invalid pubkey length\\\");\\n        require(withdrawal_credentials.length == 32, \\\"DepositContract: invalid withdrawal_credentials length\\\");\\n        require(signature.length == 96, \\\"DepositContract: invalid signature length\\\");\\n\\n        // Check deposit amount\\n        require(msg.value >= 1 ether, \\\"DepositContract: deposit value too low\\\");\\n        require(msg.value % 1 gwei == 0, \\\"DepositContract: deposit value not multiple of gwei\\\");\\n        uint deposit_amount = msg.value / 1 gwei;\\n        require(deposit_amount <= type(uint64).max, \\\"DepositContract: deposit value too high\\\");\\n\\n        // Call gating contract\\n        if(depositGater != address(0)) {\\n            IDepositGater(depositGater).check_deposit(msg.sender, pubkey, withdrawal_credentials, signature, msg.value);\\n        }\\n\\n        // Emit `DepositEvent` log\\n        bytes memory amount = to_little_endian_64(uint64(deposit_amount));\\n        emit DepositEvent(\\n            pubkey,\\n            withdrawal_credentials,\\n            amount,\\n            signature,\\n            to_little_endian_64(uint64(deposit_count))\\n        );\\n\\n        // Compute deposit data root (`DepositData` hash tree root)\\n        bytes32 pubkey_root = sha256(abi.encodePacked(pubkey, bytes16(0)));\\n        bytes32 signature_root = sha256(abi.encodePacked(\\n            sha256(abi.encodePacked(signature[:64])),\\n            sha256(abi.encodePacked(signature[64:], bytes32(0)))\\n        ));\\n        bytes32 node = sha256(abi.encodePacked(\\n            sha256(abi.encodePacked(pubkey_root, withdrawal_credentials)),\\n            sha256(abi.encodePacked(amount, bytes24(0), signature_root))\\n        ));\\n\\n        // Verify computed and expected deposit data roots match\\n        require(node == deposit_data_root, \\\"DepositContract: reconstructed DepositData does not match supplied deposit_data_root\\\");\\n\\n        // Avoid overflowing the Merkle tree (and prevent edge case in computing `branch`)\\n        require(deposit_count < MAX_DEPOSIT_COUNT, \\\"DepositContract: merkle tree full\\\");\\n\\n        // Add deposit data root to Merkle tree (update a single `branch` node)\\n        deposit_count += 1;\\n        uint size = deposit_count;\\n        for (uint height = 0; height < DEPOSIT_CONTRACT_TREE_DEPTH; height++) {\\n            if ((size & 1) == 1) {\\n                branch[height] = node;\\n                return;\\n            }\\n            node = sha256(abi.encodePacked(branch[height], node));\\n            size /= 2;\\n        }\\n        // As the loop should always end prematurely with the `return` statement,\\n        // this code should be unreachable. We assert `false` just to be safe.\\n        assert(false);\\n    }\\n\\n    function supportsInterface(bytes4 interfaceId) override external pure returns (bool) {\\n        return interfaceId == type(ERC165).interfaceId || interfaceId == type(IDepositContract).interfaceId;\\n    }\\n\\n    function to_little_endian_64(uint64 value) internal pure returns (bytes memory ret) {\\n        ret = new bytes(8);\\n        bytes8 bytesValue = bytes8(value);\\n        // Byteswapping during copying to bytes.\\n        ret[0] = bytesValue[7];\\n        ret[1] = bytesValue[6];\\n        ret[2] = bytesValue[5];\\n        ret[3] = bytesValue[4];\\n        ret[4] = bytesValue[3];\\n        ret[5] = bytesValue[2];\\n        ret[6] = bytesValue[1];\\n        ret[7] = bytesValue[0];\\n    }\\n}\\n\",\"keccak256\":\"0xd95e435a124ac87c165dc22b4ee247be4db45b07b88eb4f148a514e5a51c6284\",\"license\":\"CC0-1.0\"},\"contracts/IDepositGater.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.21;\\n\\ninterface IDepositGater {\\n    function check_deposit(address sender, bytes calldata pubkey, bytes calldata withdrawal_credentials, bytes calldata signature, uint256 amount) external returns (bool);\\n}\\n\",\"keccak256\":\"0x121586c9d42637a909ad7ce708a2b3a093db2a7a7d2edf98b4cde77d2cd7a2de\",\"license\":\"MIT\"}},\"version\":1}"
}